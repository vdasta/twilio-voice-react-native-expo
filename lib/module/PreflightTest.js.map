{"version":3,"names":["EventEmitter","common","Constants","InvalidStateError","constructTwilioError","PreflightTest","constructor","uuid","_defineProperty","nativePreflightTestEvent","PreflightTestEventKeyUuid","_uuid","preflightTestEventKeyType","PreflightTestEventTypeValueCompleted","_handleCompletedEvent","PreflightTestEventTypeValueConnected","_handleConnectedEvent","PreflightTestEventTypeValueFailed","_handleFailedEvent","PreflightTestEventTypeValueQualityWarning","_handleQualityWarningEvent","PreflightTestEventTypeValueSample","_handleSampleEvent","_exhaustiveCheck","PreflightTestEventKeyType","nativeEvent","report","PreflightTestCompletedEventKeyReport","constructInvalidValueError","Event","Completed","parsedReport","parseReport","emit","Connected","message","code","PreflightTestFailedEventKeyError","Failed","error","currentWarnings","PreflightTestQualityWarningEventKeyCurrentWarnings","Array","isArray","QualityWarning","forEach","w","previousWarnings","PreflightTestQualityWarningEventKeyPreviousWarnings","sampleStr","PreflightTestSampleEventKeySample","Sample","sampleObj","JSON","parse","parseSample","NativeEventEmitter","addListener","ScopePreflightTest","_handleNativeEvent","Platform","OS","setTimeout","NativeModule","preflightTest_flushEvents","_invokeAndCatchNativeMethod","method","catch","ErrorCodeInvalidStateError","getCallSid","preflightTest_getCallSid","getEndTime","preflightTest_getEndTime","then","Number","getLatestSample","preflightTest_getLatestSample","getReport","preflightTest_getReport","getStartTime","preflightTest_getStartTime","getState","preflightTest_getState","parseState","stop","preflightTest_stop","parseTimeMeasurement","nativeTimeMeasurement","duration","end","endTime","start","startTime","parseCallQuality","nativeCallQuality","parseCallQualityAndroid","parseCallQualityIos","parsedCallQuality","callQualityMap","android","get","ios","nativeState","parsedState","preflightTestStateMap","expectedKeys","keys","join","sampleObject","audioInputLevel","audioOutputLevel","bytesReceived","bytesSent","codec","jitter","mos","packetsLost","packetsLostFraction","packetsReceived","packetsSent","rtt","timestamp","sample","parseIsTurnRequired","isTurnRequired","parseIsTurnRequiredAndroid","parseIsTurnRequiredIos","parsedValue","isTurnRequiredMap","parseWarnings","warnings","parseWarningsCleared","warningsCleared","rawReport","unprocessedReport","callSid","callQuality","edge","iceCandidateStats","iceCandidates","stats","networkStats","unprocessedNetworkTiming","networkTiming","signaling","peerConnection","ice","iceConnection","testTiming","preflightTest","samples","statsSamples","map","selectedEdge","selectedIceCandidatePairStats","selectedIceCandidatePair","eventName","valueName","expectedType","actualType","_PreflightTest","State","CallQuality","PreflightCallQualityExcellent","PreflightCallQualityGreat","PreflightCallQualityGood","PreflightCallQualityFair","PreflightCallQualityDegraded","Map","Excellent","Great","Good","Fair","Degraded","PreflightTestStateCompleted","PreflightTestStateConnected","PreflightTestStateConnecting","Connecting","PreflightTestStateFailed"],"sources":["PreflightTest.ts"],"sourcesContent":["/**\n * Copyright Â© 2025 Twilio, Inc. All rights reserved. Licensed under the Twilio\n * license.\n *\n * See LICENSE in the project root for license information.\n */\n\nimport { EventEmitter } from 'eventemitter3';\nimport type { Call } from './Call';\nimport * as common from './common';\nimport { Constants } from './constants';\nimport { InvalidStateError, TwilioError } from './error';\nimport { constructTwilioError } from './error/utility';\nimport type { AudioCodec } from './type/AudioCodec';\nimport type { IceServer, IceTransportPolicy } from './type/Ice';\nimport type * as PreflightTestType from './type/PreflightTest';\n\nexport interface PreflightTest {\n  /**\n   * ------------\n   * Emit Typings\n   * ------------\n   */\n\n  /** @internal */\n  emit(connectedEvent: PreflightTest.Event.Connected): boolean;\n\n  /** @internal */\n  emit(\n    completedEvent: PreflightTest.Event.Completed,\n    report: PreflightTest.Report\n  ): boolean;\n\n  /** @internal */\n  emit(failedEvent: PreflightTest.Event.Failed, error: TwilioError): boolean;\n\n  /** @internal */\n  emit(\n    sampleEvent: PreflightTest.Event.Sample,\n    sample: PreflightTest.RTCSample\n  ): boolean;\n\n  /** @internal */\n  emit(\n    qualityWarningEvent: PreflightTest.Event.QualityWarning,\n    currentWarnings: Call.QualityWarning[],\n    previousWarnings: Call.QualityWarning[]\n  ): boolean;\n\n  /**\n   * ----------------\n   * Listener Typings\n   * ----------------\n   */\n\n  /**\n   * Connected event. Raised when the PreflightTest has successfully connected.\n   *\n   * @example\n   * ```typescript\n   * preflightTest.addListener(PreflightTest.Event.Connected, () => {\n   *   // preflightTest has been connected\n   * });\n   * ```\n   *\n   * @param connectedEvent - The raised event string.\n   * @param listener - A listener function that will be invoked when the event\n   * is raised.\n   * @returns - The PreflightTest object.\n   */\n  addListener(\n    connectedEvent: PreflightTest.Event.Connected,\n    listener: PreflightTest.Listener.Connected\n  ): this;\n  /** {@inheritDoc (PreflightTest:interface).(addListener:1)} */\n  on(\n    connectedEvent: PreflightTest.Event.Connected,\n    listener: PreflightTest.Listener.Connected\n  ): this;\n\n  /**\n   * Completed event. Raised when the PreflightTest has successfully completed.\n   *\n   * @example\n   * ```typescript\n   * preflightTest.addListener(PreflightTest.Event.Completed, (report: PreflightTest.Report) => {\n   *   // preflightTest has been completed\n   *   // consider using the report and adjusting your UI to show any potential issues\n   * });\n   * ```\n   *\n   * @param completedEvent - The raised event string.\n   * @param listener - A listener function that will be invoked when the event\n   * is raised.\n   * @returns - The PreflightTest object.\n   */\n  addListener(\n    completedEvent: PreflightTest.Event.Completed,\n    listener: PreflightTest.Listener.Completed\n  ): this;\n  /** {@inheritDoc (PreflightTest:interface).(addListener:2)} */\n  on(\n    completedEvent: PreflightTest.Event.Completed,\n    listener: PreflightTest.Listener.Completed\n  ): this;\n\n  /**\n   * Failed event. Raised when the PreflightTest was unable to be performed.\n   *\n   * @example\n   * ```typescript\n   * preflightTest.addListener(PreflightTest.Event.Failed, (error: TwilioError) => {\n   *   // preflightTest has failed\n   *   // consider adjusting your UI to show the error\n   * });\n   * ```\n   *\n   * @param failedEvent - The raised event string.\n   * @param listener - A listener function that will be invoked when the event\n   * is raised.\n   * @returns - The PreflightTest object.\n   */\n  addListener(\n    failedEvent: PreflightTest.Event.Failed,\n    listener: PreflightTest.Listener.Failed\n  ): this;\n  /** {@inheritDoc (PreflightTest:interface).(addListener:3)} */\n  on(\n    failedEvent: PreflightTest.Event.Failed,\n    listener: PreflightTest.Listener.Failed\n  ): this;\n\n  /**\n   * Sample event. Raised when the PreflightTest has generated a stats sample\n   * during the test.\n   *\n   * @example\n   * ```typescript\n   * preflightTest.addListener(PreflightTest.Event.Sample, (sample: PreflightTest.Sample) => {\n   *   // preflightTest has generated a sample\n   *   // consider updating your UI with information from the sample\n   * });\n   * ```\n   *\n   * @param sampleEvent - The raised event string.\n   * @param listener - A listener function that will be invoked when the event\n   * is raised.\n   * @returns - The PreflightTest object.\n   */\n  addListener(\n    sampleEvent: PreflightTest.Event.Sample,\n    listener: PreflightTest.Listener.Sample\n  ): this;\n  /** {@inheritDoc (PreflightTest:interface).(addListener:4)} */\n  on(\n    sampleEvent: PreflightTest.Event.Sample,\n    listener: PreflightTest.Listener.Sample\n  ): this;\n\n  /**\n   * QualityWarning event. Raised when the PreflightTest has encountered a\n   * QualityWarning during a test.\n   *\n   * @example\n   * ```typescript\n   * preflightTest.addListener(\n   *   PreflightTest.Event.QualityWarning,\n   *   (currentWarnings: Call.QualityWarning[], previousWarnings: Call.QualityWarning[]) => {\n   *     // preflightTest has generated or cleared a quality warning\n   *     // consider updating your UI with information about the warning\n   *   },\n   * );\n   * ```\n   *\n   * @param qualityWarningEvent - The raised event string.\n   * @param listener - A listener function that will be invoked when the event\n   * is raised.\n   * @returns - The PreflightTest object.\n   */\n  addListener(\n    warningEvent: PreflightTest.Event.QualityWarning,\n    listener: PreflightTest.Listener.QualityWarning\n  ): this;\n  /** {@inheritDoc (PreflightTest:interface).(addListener:5)} */\n  on(\n    warningEvent: PreflightTest.Event.QualityWarning,\n    listener: PreflightTest.Listener.QualityWarning\n  ): this;\n\n  /**\n   * Generic event listener typings.\n   * @param preflightTestEvent - The raised event string.\n   * @param listener - A listener function that will be invoked when the event\n   * is raised.\n   * @returns - The PreflightTest object.\n   */\n  addListener(\n    event: PreflightTest.Event,\n    listener: PreflightTest.Listener.Generic\n  ): this;\n  /** {@inheritDoc (PreflightTest:interface).(addListener:6)} */\n  on(\n    event: PreflightTest.Event,\n    listener: PreflightTest.Listener.Generic\n  ): this;\n}\n\n/**\n * The PreflightTest for Voice React Native SDK allows you to anticipate and\n * troubleshoot end users' connectivity and bandwidth issues before or during\n * Twilio Voice calls.\n *\n * You can run a PreflightTest before a Twilio Voice call. The PreflightTest\n * performs a test call to Twilio and provides a\n * {@link (PreflightTest:namespace).Report} object at the end. The report\n * includes information about the end user's network connection (including\n * jitter, packet loss, and round trip time) and connection settings.\n *\n * @example\n * ```typescript\n * const accessToken = ...;\n * const preflightTest = voice.runPreflightTest(accessToken);\n *\n * preflightTest.on(PreflightTest.Event.Connected, () => {\n *   // handle when preflightTest connects\n * });\n *\n * preflightTest.on(PreflightTest.Event.Completed, (report: PreflightTest.Report) => {\n *   // handle when preflightTest is complete\n * });\n *\n * preflightTest.on(PreflightTest.Event.Failed, (error: TwilioError) => {\n *   // handle preflightTest errors\n * });\n *\n * preflightTest.on(\n *   PreflightTest.Event.QualityWarning,\n *   (currentWarnings: Call.QualityWarning[], previousWarnings: Call.QualityWarning[]) => {\n *     // handle preflightTest quality warnings\n *   },\n * );\n *\n * preflightTest.on(PreflightTest.Event.Sample, (sample: PreflightTest.Sample) => {\n *   // handle preflightTest sample\n * });\n * ```\n */\nexport class PreflightTest extends EventEmitter {\n  /**\n   * UUID of the PreflightTest. This is generated by the native layer and used\n   * to link events emitted by the native layer to the respective JS object.\n   */\n  private _uuid: string;\n\n  /**\n   * PreflightTest constructor.\n   *\n   * @internal\n   */\n  constructor(uuid: string) {\n    super();\n\n    this._uuid = uuid;\n\n    common.NativeEventEmitter.addListener(\n      Constants.ScopePreflightTest,\n      this._handleNativeEvent\n    );\n\n    // by using a setTimeout here, we let the call stack empty before we flush\n    // the preflight test events. this way, listeners on this object can bind\n    // before flushing\n    if (common.Platform.OS === 'ios') {\n      common.setTimeout(() => {\n        common.NativeModule.preflightTest_flushEvents();\n      });\n    }\n  }\n\n  /**\n   * Handle all PreflightTest native events.\n   */\n  private _handleNativeEvent = (\n    nativePreflightTestEvent: PreflightTestType.NativeEvent\n  ): void => {\n    const uuid = nativePreflightTestEvent[Constants.PreflightTestEventKeyUuid];\n    if (typeof uuid !== 'string') {\n      throw new InvalidStateError(\n        `Unexpected PreflightTest UUID type: \"${uuid}\".`\n      );\n    }\n\n    if (uuid !== this._uuid) {\n      return;\n    }\n\n    // VBLOCKS-5083\n    // Update this member access when we upgrade typescript for this project.\n    switch (nativePreflightTestEvent.preflightTestEventKeyType) {\n      case Constants.PreflightTestEventTypeValueCompleted: {\n        return this._handleCompletedEvent(nativePreflightTestEvent);\n      }\n      case Constants.PreflightTestEventTypeValueConnected: {\n        return this._handleConnectedEvent();\n      }\n      case Constants.PreflightTestEventTypeValueFailed: {\n        return this._handleFailedEvent(nativePreflightTestEvent);\n      }\n      case Constants.PreflightTestEventTypeValueQualityWarning: {\n        return this._handleQualityWarningEvent(nativePreflightTestEvent);\n      }\n      case Constants.PreflightTestEventTypeValueSample: {\n        return this._handleSampleEvent(nativePreflightTestEvent);\n      }\n      default: {\n        const _exhaustiveCheck: never = nativePreflightTestEvent;\n        throw new InvalidStateError(\n          `Unexpected native PreflightTest event key type: \"${\n            (_exhaustiveCheck as any)[Constants.PreflightTestEventKeyType]\n          }\".`\n        );\n      }\n    }\n  };\n\n  /**\n   * Handle completed event.\n   */\n  private _handleCompletedEvent = (\n    nativeEvent: PreflightTestType.NativeEventCompleted\n  ) => {\n    const report = nativeEvent[Constants.PreflightTestCompletedEventKeyReport];\n    if (typeof report !== 'string') {\n      throw constructInvalidValueError(\n        PreflightTest.Event.Completed,\n        'report',\n        'string',\n        typeof report\n      );\n    }\n\n    const parsedReport = parseReport(report);\n\n    this.emit(PreflightTest.Event.Completed, parsedReport);\n  };\n\n  /**\n   * Handle connected event.\n   */\n  private _handleConnectedEvent = () => {\n    this.emit(PreflightTest.Event.Connected);\n  };\n\n  /**\n   * Handle failed event.\n   */\n  private _handleFailedEvent = (\n    nativeEvent: PreflightTestType.NativeEventFailed\n  ) => {\n    const { message, code } =\n      nativeEvent[Constants.PreflightTestFailedEventKeyError];\n    if (typeof message !== 'string') {\n      throw constructInvalidValueError(\n        PreflightTest.Event.Failed,\n        'message',\n        'string',\n        typeof message\n      );\n    }\n    if (typeof code !== 'number') {\n      throw constructInvalidValueError(\n        PreflightTest.Event.Failed,\n        'code',\n        'number',\n        typeof code\n      );\n    }\n    const error = constructTwilioError(message, code);\n\n    this.emit(PreflightTest.Event.Failed, error);\n  };\n\n  /**\n   * Handle quality warning event.\n   */\n  private _handleQualityWarningEvent = (\n    nativeEvent: PreflightTestType.NativeEventQualityWarning\n  ) => {\n    const currentWarnings =\n      nativeEvent[Constants.PreflightTestQualityWarningEventKeyCurrentWarnings];\n    if (!Array.isArray(currentWarnings)) {\n      throw constructInvalidValueError(\n        PreflightTest.Event.QualityWarning,\n        'currentWarnings',\n        'array',\n        typeof currentWarnings\n      );\n    }\n    currentWarnings.forEach((w) => {\n      if (typeof w !== 'string') {\n        throw constructInvalidValueError(\n          PreflightTest.Event.QualityWarning,\n          'element-in-currentWarnings',\n          'string',\n          typeof w\n        );\n      }\n    });\n\n    const previousWarnings =\n      nativeEvent[\n        Constants.PreflightTestQualityWarningEventKeyPreviousWarnings\n      ];\n    if (!Array.isArray(previousWarnings)) {\n      throw constructInvalidValueError(\n        PreflightTest.Event.QualityWarning,\n        'previousWarnings',\n        'array',\n        typeof previousWarnings\n      );\n    }\n    previousWarnings.forEach((w) => {\n      if (typeof w !== 'string') {\n        throw constructInvalidValueError(\n          PreflightTest.Event.QualityWarning,\n          'element-in-previousWarnings',\n          'string',\n          typeof w\n        );\n      }\n    });\n\n    this.emit(\n      PreflightTest.Event.QualityWarning,\n      currentWarnings as Call.QualityWarning[],\n      previousWarnings as Call.QualityWarning[]\n    );\n  };\n\n  /**\n   * Handle sample event.\n   */\n  private _handleSampleEvent = (\n    nativeEvent: PreflightTestType.NativeEventSample\n  ) => {\n    const sampleStr = nativeEvent[Constants.PreflightTestSampleEventKeySample];\n    if (typeof sampleStr !== 'string') {\n      throw constructInvalidValueError(\n        PreflightTest.Event.Sample,\n        'sample',\n        'string',\n        typeof sampleStr\n      );\n    }\n\n    const sampleObj = JSON.parse(sampleStr);\n\n    this.emit(PreflightTest.Event.Sample, parseSample(sampleObj));\n  };\n\n  /**\n   * Internal helper method to invoke a native method and handle the returned\n   * promise from the native method.\n   */\n  private async _invokeAndCatchNativeMethod<T>(\n    method: (uuid: string) => Promise<T>\n  ) {\n    return method(this._uuid).catch((error: any): never => {\n      if (typeof error.code === 'number' && error.message)\n        throw constructTwilioError(error.message, error.code);\n\n      if (error.code === Constants.ErrorCodeInvalidStateError)\n        throw new InvalidStateError(error.message);\n\n      throw error;\n    });\n  }\n\n  /**\n   * Get the CallSid of the underlying Call in the PreflightTest.\n   *\n   * @returns\n   * Promise that\n   * - Resolves with a string representing the CallSid.\n   * - Rejects if the native layer could not find the CallSid for this\n   *   PreflightTest object.\n   */\n  public async getCallSid(): Promise<string> {\n    return this._invokeAndCatchNativeMethod(\n      common.NativeModule.preflightTest_getCallSid\n    );\n  }\n\n  /**\n   * Get the end time of the PreflightTest.\n   *\n   * @returns\n   * A Promise that\n   * - Resolves with `number` if the PreflightTest has ended.\n   * - Resolves with `undefined` if PreflightTest has not ended.\n   * - Rejects if the native layer encountered an error.\n   */\n  public async getEndTime(): Promise<number> {\n    return this._invokeAndCatchNativeMethod(\n      common.NativeModule.preflightTest_getEndTime\n    ).then(Number);\n  }\n\n  /**\n   * Get the latest stats sample generated by the PreflightTest.\n   *\n   * @returns\n   * A Promise that\n   * - Resolves with the last {@link (PreflightTest:namespace).RTCSample}\n   *   generated by the PreflightTest.\n   * - Resolves with `undefined` if there is no previously generated sample.\n   * - Rejects if the native layer encountered an error.\n   */\n  public async getLatestSample(): Promise<PreflightTest.RTCSample> {\n    return this._invokeAndCatchNativeMethod(\n      common.NativeModule.preflightTest_getLatestSample\n    ).then((sampleStr) => {\n      const sampleObj = JSON.parse(sampleStr);\n      return parseSample(sampleObj);\n    });\n  }\n\n  /**\n   * Get the final report generated by the PreflightTest.\n   *\n   * @returns\n   * A Promise that\n   * - Resolves with the final {@link (PreflightTest:namespace).Report}.\n   * - Resolves with `undefined` if the report is unavailable.\n   * - Rejects if the native layer encountered an error.\n   */\n  public async getReport(): Promise<PreflightTest.Report> {\n    return this._invokeAndCatchNativeMethod(\n      common.NativeModule.preflightTest_getReport\n    ).then(parseReport);\n  }\n\n  /**\n   * Get the start time of the PreflightTest.\n   *\n   * @returns\n   * A Promise that\n   * - Resolves with a `number` representing the start time of the\n   *   PreflightTest.\n   * - Rejects if the native layer encountered an error.\n   */\n  public async getStartTime(): Promise<number> {\n    return this._invokeAndCatchNativeMethod(\n      common.NativeModule.preflightTest_getStartTime\n    ).then(Number);\n  }\n\n  /**\n   * Get the state of the PreflightTest.\n   *\n   * @returns\n   * A Promise that\n   * - Resolves with the current state of the PreflightTest.\n   * - Rejects if the native layer encountered an error.\n   */\n  public async getState(): Promise<PreflightTest.State> {\n    return this._invokeAndCatchNativeMethod(\n      common.NativeModule.preflightTest_getState\n    ).then(parseState);\n  }\n\n  /**\n   * Stop the ongoing PreflightTest.\n   *\n   * @returns\n   * A Promise that\n   * - Resolves if the PreflightTest was successfully stopped.\n   * - Rejects if the native layer encountered an error.\n   */\n  public async stop(): Promise<void> {\n    return this._invokeAndCatchNativeMethod(\n      common.NativeModule.preflightTest_stop\n    );\n  }\n}\n\n/**\n * Preflight helper functions to parse JSON strings from the native layer into\n * proper JS objects to emit from this class.\n */\n\n/**\n * Parse native time measurement.\n */\nfunction parseTimeMeasurement(nativeTimeMeasurement: {\n  duration: number;\n  endTime: number;\n  startTime: number;\n}): PreflightTest.TimeMeasurement {\n  return {\n    duration: nativeTimeMeasurement.duration,\n    end: nativeTimeMeasurement.endTime,\n    start: nativeTimeMeasurement.startTime,\n  };\n}\n\n/**\n * Parse native call quality enum.\n */\nfunction parseCallQuality(\n  nativeCallQuality: any\n): PreflightTest.CallQuality | null {\n  switch (common.Platform.OS) {\n    case 'android': {\n      return parseCallQualityAndroid(nativeCallQuality);\n    }\n    case 'ios': {\n      return parseCallQualityIos(nativeCallQuality);\n    }\n    default: {\n      throw new InvalidStateError('Invalid platform.');\n    }\n  }\n}\n\n/**\n * Parse call quality value for Android platform.\n */\nfunction parseCallQualityAndroid(\n  nativeCallQuality: string | undefined | null\n): PreflightTest.CallQuality | null {\n  if (typeof nativeCallQuality === 'undefined' || nativeCallQuality === null) {\n    return null;\n  }\n\n  if (typeof nativeCallQuality !== 'string') {\n    throw new InvalidStateError(\n      `Call quality not of type \"string\". Found \"${typeof nativeCallQuality}\".`\n    );\n  }\n\n  const parsedCallQuality = callQualityMap.android.get(nativeCallQuality);\n\n  if (typeof parsedCallQuality !== 'string') {\n    throw new InvalidStateError(\n      `Call quality invalid. Expected a string, found \"${nativeCallQuality}\".`\n    );\n  }\n\n  return parsedCallQuality;\n}\n\n/**\n * Parse call quality for iOS platform.\n */\nfunction parseCallQualityIos(\n  nativeCallQuality: number | undefined | null\n): PreflightTest.CallQuality | null {\n  if (typeof nativeCallQuality === 'undefined' || nativeCallQuality === null) {\n    return null;\n  }\n\n  if (typeof nativeCallQuality !== 'number') {\n    throw new InvalidStateError(\n      `Call quality not of type \"number\". Found \"${typeof nativeCallQuality}\".`\n    );\n  }\n\n  const parsedCallQuality = callQualityMap.ios.get(nativeCallQuality);\n\n  if (typeof parsedCallQuality !== 'string') {\n    throw new InvalidStateError(\n      `Call quality invalid. Expected [0, 4], found \"${nativeCallQuality}\".`\n    );\n  }\n\n  return parsedCallQuality;\n}\n\n/**\n * Parse native preflight test state value.\n */\nfunction parseState(nativeState: string): PreflightTest.State {\n  const parsedState = preflightTestStateMap.get(nativeState);\n\n  if (typeof parsedState !== 'string') {\n    const expectedKeys = Array(preflightTestStateMap.keys()).join(', ');\n    throw new InvalidStateError(\n      'PreflightTest state invalid. ' +\n        `Expected one of \"[${expectedKeys}]\". Got \"${nativeState}\".`\n    );\n  }\n\n  return parsedState;\n}\n\n/**\n * Parse a sample object and transform the keys to match the expected output.\n */\nfunction parseSample(\n  sampleObject: Omit<\n    PreflightTest.RTCSample,\n    typeof Constants.PreflightRTCSampleTimestamp\n  > & { [Constants.PreflightRTCSampleTimestamp]: string }\n): PreflightTest.RTCSample {\n  const audioInputLevel = sampleObject.audioInputLevel;\n  const audioOutputLevel = sampleObject.audioOutputLevel;\n  const bytesReceived = sampleObject.bytesReceived;\n  const bytesSent = sampleObject.bytesSent;\n  const codec = sampleObject.codec;\n  const jitter = sampleObject.jitter;\n  const mos = sampleObject.mos;\n  const packetsLost = sampleObject.packetsLost;\n  const packetsLostFraction = sampleObject.packetsLostFraction;\n  const packetsReceived = sampleObject.packetsReceived;\n  const packetsSent = sampleObject.packetsSent;\n  const rtt = sampleObject.rtt;\n  const timestamp = Number(sampleObject.timestamp);\n\n  const sample = {\n    audioInputLevel,\n    audioOutputLevel,\n    bytesReceived,\n    bytesSent,\n    codec,\n    jitter,\n    mos,\n    packetsLost,\n    packetsLostFraction,\n    packetsReceived,\n    packetsSent,\n    rtt,\n    timestamp,\n  };\n\n  return sample;\n}\n\n/**\n * Parse native \"isTurnRequired\" value.\n */\nfunction parseIsTurnRequired(isTurnRequired: any): boolean | null {\n  switch (common.Platform.OS) {\n    case 'android': {\n      return parseIsTurnRequiredAndroid(isTurnRequired);\n    }\n    case 'ios': {\n      return parseIsTurnRequiredIos(isTurnRequired);\n    }\n    default: {\n      throw new InvalidStateError('Invalid platform.');\n    }\n  }\n}\n\n/**\n * Parse native \"isTurnRequired\" value on Android.\n */\nfunction parseIsTurnRequiredAndroid(\n  isTurnRequired: boolean | undefined | null\n): boolean | null {\n  if (typeof isTurnRequired === 'undefined' || isTurnRequired === null) {\n    return null;\n  }\n\n  if (typeof isTurnRequired !== 'boolean') {\n    throw new InvalidStateError(\n      `PreflightTest \"isTurnRequired\" not valid. Found \"${isTurnRequired}\".`\n    );\n  }\n\n  return isTurnRequired;\n}\n\n/**\n * Parse native \"isTurnRequired\" value on iOS.\n */\nfunction parseIsTurnRequiredIos(\n  isTurnRequired: string | undefined | null\n): boolean | null {\n  if (typeof isTurnRequired === 'undefined' || isTurnRequired === null) {\n    return null;\n  }\n\n  if (typeof isTurnRequired !== 'string') {\n    throw new InvalidStateError(\n      'PreflightTest \"isTurnRequired\" not of type \"string\". ' +\n        `Found \"${isTurnRequired}\".`\n    );\n  }\n\n  const parsedValue = isTurnRequiredMap.ios.get(isTurnRequired);\n\n  if (typeof parsedValue !== 'boolean') {\n    throw new InvalidStateError(\n      `PreflightTest \"isTurnRequired\" not valid. Found \"${isTurnRequired}\".`\n    );\n  }\n\n  return parsedValue;\n}\n\n/**\n * Parse native warnings array.\n */\nfunction parseWarnings(\n  warnings: PreflightTest.Warning[] | undefined | null\n): PreflightTest.Warning[] {\n  if (typeof warnings === 'undefined' || warnings === null) {\n    return [];\n  }\n\n  if (!Array.isArray(warnings)) {\n    throw new InvalidStateError(\n      `PreflightTest \"warnings\" invalid. Found \"${warnings}\".`\n    );\n  }\n\n  return warnings;\n}\n\n/**\n * Parse native warningsCleared array.\n */\nfunction parseWarningsCleared(\n  warningsCleared: PreflightTest.WarningCleared[] | undefined | null\n): PreflightTest.WarningCleared[] {\n  if (typeof warningsCleared === 'undefined' || warningsCleared === null) {\n    return [];\n  }\n\n  if (!Array.isArray(warningsCleared)) {\n    throw new InvalidStateError(\n      `PreflightTest \"warningsCleared\" invalid. Found \"${warningsCleared}\".`\n    );\n  }\n\n  return warningsCleared;\n}\n\n/**\n * Parse native preflight report.\n */\nfunction parseReport(rawReport: string): PreflightTest.Report {\n  const unprocessedReport: any = JSON.parse(rawReport);\n\n  const callSid: string = unprocessedReport.callSid;\n\n  // Note: Android returns enum values where the first letter is capitalized.\n  // The helper function normalizes this into all-lowercased values.\n  const callQuality: PreflightTest.CallQuality | null = parseCallQuality(\n    unprocessedReport.callQuality\n  );\n\n  const edge: string = unprocessedReport.edge;\n\n  // Note: key change from `iceCandidates` to `iceCandidateStats`\n  const iceCandidateStats: PreflightTest.RTCIceCandidateStats[] =\n    unprocessedReport.iceCandidates;\n\n  // Note: iOS returns a string, Android returns a boolean\n  const isTurnRequired: boolean | null = parseIsTurnRequired(\n    unprocessedReport.isTurnRequired\n  );\n\n  // Note: key change from `networkStats` to `stats`.\n  const stats: PreflightTest.RTCStats = unprocessedReport.networkStats;\n\n  // Note: removing preflightTest from networkTiming and putting it in a\n  // separate testTiming member\n  const unprocessedNetworkTiming: {\n    signaling: any;\n    peerConnection: any;\n    iceConnection: any;\n    preflightTest: any;\n  } = unprocessedReport.networkTiming;\n\n  // Note: nested key change from `startTime` to `start` and `endTime` to `end`.\n  const networkTiming: PreflightTest.NetworkTiming = {\n    signaling: parseTimeMeasurement(unprocessedNetworkTiming.signaling),\n    peerConnection: parseTimeMeasurement(\n      unprocessedNetworkTiming.peerConnection\n    ),\n    ice: parseTimeMeasurement(unprocessedNetworkTiming.iceConnection),\n  };\n\n  // Note: nested key change from `startTime` to `start` and `endTime` to `end`.\n  const testTiming: PreflightTest.TimeMeasurement = parseTimeMeasurement(\n    unprocessedNetworkTiming.preflightTest\n  );\n\n  // Note: key change from `statsSamples` to `stats`.\n  const samples: PreflightTest.RTCSample[] =\n    unprocessedReport.statsSamples.map(parseSample);\n\n  const selectedEdge: string = unprocessedReport.selectedEdge;\n\n  // Note: key change from `selectedIceCandidatePair` to `selectedIceCandidatePairStats`.\n  const selectedIceCandidatePairStats: PreflightTest.RTCSelectedIceCandidatePairStats =\n    unprocessedReport.selectedIceCandidatePair;\n\n  // Note: iOS returns undefined where Android returns an empty array\n  // when there were no warnings\n  const warnings: PreflightTest.Warning[] = parseWarnings(\n    unprocessedReport.warnings\n  );\n\n  // Note: iOS returns undefined where Android returns an empty array\n  // when there were no warningsCleared\n  const warningsCleared: PreflightTest.WarningCleared[] = parseWarningsCleared(\n    unprocessedReport.warningsCleared\n  );\n\n  const report: PreflightTest.Report = {\n    callSid,\n    callQuality,\n    edge,\n    iceCandidateStats,\n    isTurnRequired,\n    stats,\n    networkTiming,\n    testTiming,\n    samples,\n    selectedEdge,\n    selectedIceCandidatePairStats,\n    warnings,\n    warningsCleared,\n  };\n\n  return report;\n}\n\n/**\n * Helper function to construct errors when the native layer sends an\n * unexpected value to the JS layer.\n */\nfunction constructInvalidValueError(\n  eventName: PreflightTest.Event,\n  valueName: string,\n  expectedType: string,\n  actualType: string\n): InvalidStateError {\n  return new InvalidStateError(\n    `Invalid \"preflightTest#${eventName}\" value type for \"${valueName}\". ` +\n      `Expected \"${expectedType}\"; actual \"${actualType}\".`\n  );\n}\n\n/**\n * Helper types for the PrefligthTest class.\n */\nexport namespace PreflightTest {\n  /**\n   * Options to run a PreflightTest.\n   */\n  export interface Options {\n    /**\n     * Array of ICE servers to use for the PreflightTest.\n     */\n    [Constants.CallOptionsKeyIceServers]?: IceServer[];\n    /**\n     * The ICE transport policy to use for the PreflightTest.\n     */\n    [Constants.CallOptionsKeyIceTransportPolicy]?: IceTransportPolicy;\n    /**\n     * The preferred audio codec to use for the PreflightTest.\n     */\n    [Constants.CallOptionsKeyPreferredAudioCodecs]?: AudioCodec[];\n  }\n\n  /**\n   * Events raised by the PreflightTest.\n   */\n  export enum Event {\n    /** {@inheritdoc (PreflightTest:interface).(addListener:1)} */\n    Connected = 'connected',\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:2)} */\n    Completed = 'completed',\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:3)} */\n    Failed = 'failed',\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:4)} */\n    Sample = 'sample',\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:5)} */\n    QualityWarning = 'qualityWarning',\n  }\n\n  /**\n   * Types of the listener methods that are bound to the PreflightTest events.\n   */\n  export namespace Listener {\n    /** {@inheritdoc (PreflightTest:interface).(addListener:1)} */\n    export type Connected = () => void;\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:2)} */\n    export type Completed = (report: Report) => void;\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:3)} */\n    export type Failed = (error: TwilioError) => void;\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:4)} */\n    export type Sample = (sample: RTCSample) => void;\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:5)} */\n    export type QualityWarning = (\n      currentWarnings: Call.QualityWarning[],\n      previousWarnings: Call.QualityWarning[]\n    ) => void;\n\n    /** {@inheritdoc (PreflightTest:interface).(addListener:6)} */\n    export type Generic = (...args: any[]) => void;\n  }\n\n  /**\n   * States of the PreflightTest object.\n   */\n  export enum State {\n    /**\n     * The state of the PreflightTest after the connected event has been raised.\n     *\n     * See {@link (PreflightTest:interface).(addListener:1)}.\n     */\n    Connected = 'connected',\n\n    /**\n     * The state of the PreflightTest after the completed event has been raised.\n     *\n     * See {@link (PreflightTest:interface).(addListener:2)}.\n     */\n    Completed = 'completed',\n\n    /**\n     * The state of the PreflightTest after the PreflightTest has been started\n     * but not yet connected.\n     */\n    Connecting = 'connecting',\n\n    /**\n     * The state of the PreflightTest after the failed event has been raised.\n     *\n     * See {@link (PreflightTest:interface).(addListener:3)}.\n     */\n    Failed = 'failed',\n  }\n\n  /**\n   * Represents general stats for a specific metric.\n   */\n  export interface Stats {\n    /**\n     * The average value for this metric.\n     */\n    [Constants.PreflightStatsAverage]: number;\n\n    /**\n     * The maximum value for this metric.\n     */\n    [Constants.PreflightStatsMax]: number;\n\n    /**\n     * The minimum value for this metric.\n     */\n    [Constants.PreflightStatsMin]: number;\n  }\n\n  /**\n   * Represents RTC related stats that are extracted from RTC samples.\n   */\n  export interface RTCStats {\n    /**\n     * Packets delay variation.\n     */\n    [Constants.PreflightRTCStatsJitter]: Stats;\n\n    /**\n     * Mean opinion score, 1.0 through roughly 4.5.\n     */\n    [Constants.PreflightRTCStatsMos]: Stats;\n\n    /**\n     * Round trip time, to the server back to the client.\n     */\n    [Constants.PreflightRTCStatsRtt]: Stats;\n  }\n\n  /**\n   * Timing measurements that provide operational milestones.\n   */\n  export interface TimeMeasurement {\n    /**\n     * Number of milliseconds elapsed for this measurements.\n     */\n    [Constants.PreflightTimeMeasurementDuration]: number;\n\n    /**\n     * A millisecond timestamp that represents the end of a PreflightTest.\n     */\n    [Constants.PreflightTimeMeasurementEnd]: number;\n\n    /**\n     * A millisecond timestamp that represents the start of a PreflightTest.\n     */\n    [Constants.PreflightTimeMeasurementStart]: number;\n  }\n\n  /**\n   * Represents network related time measurements.\n   */\n  export interface NetworkTiming {\n    /**\n     * Measurements for establishing ICE connection.\n     */\n    [Constants.PreflightNetworkTimingIce]: TimeMeasurement;\n\n    /**\n     * Measurements for establishing a PeerConnection.\n     */\n    [Constants.PreflightNetworkTimingPeerConnection]: TimeMeasurement;\n\n    /**\n     * Measurements for establishing a signaling connection.\n     */\n    [Constants.PreflightNetworkTimingSignaling]: TimeMeasurement;\n  }\n\n  /**\n   * A warning that can be raised by the `PreflightTest` and returned in the\n   * `PreflightTest.Report.warnings` field.\n   */\n  export interface Warning {\n    /**\n     * Name of the warning.\n     */\n    [Constants.PreflightWarningName]: string;\n\n    /**\n     * Threshold value that, when exceeded, will trigger this warning.\n     */\n    [Constants.PreflightWarningThreshold]: string;\n\n    /**\n     * Detected values that exceeded the threshold value and triggered this\n     * warning.\n     */\n    [Constants.PreflightWarningValues]: string;\n\n    /**\n     * Timestamp of the warning.\n     */\n    [Constants.PreflightWarningTimestamp]: number;\n  }\n\n  /**\n   * Signifies when a `PreflightTest.Warning` has been cleared. Emitted by the\n   * `PreflightTest` when the warning was cleared and also included in the\n   * `PreflightTest.Report.warningsCleared` field.\n   */\n  export interface WarningCleared {\n    /**\n     * The name of the cleared warning.\n     */\n    [Constants.PreflightWarningClearedName]: string;\n\n    /**\n     * The timestamp when the warning was cleared.\n     */\n    [Constants.PreflightWarningClearedTimestamp]: number;\n  }\n\n  /**\n   * Provides information related to the ICE candidate.\n   */\n  export interface RTCIceCandidateStats {\n    /**\n     * The type of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsCandidateType]: string;\n\n    /**\n     * Whether or not the candidate was deleted.\n     */\n    [Constants.PreflightRTCIceCandidateStatsDeleted]: boolean;\n\n    /**\n     * The IP address of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsIp]: string;\n\n    /**\n     * Whether or not the ICE candidate is remote. True if remote, false if\n     * local.\n     */\n    [Constants.PreflightRTCIceCandidateStatsIsRemote]: boolean;\n\n    /**\n     * Represents the network cost of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsNetworkCost]: number;\n\n    /**\n     * The network ID of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsNetworkId]: number;\n\n    /**\n     * The network type of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsNetworkType]: string;\n\n    /**\n     * The port of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsPort]: number;\n\n    /**\n     * The priority of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsPriority]: number;\n\n    /**\n     * The protocol that the ICE candidate is using to communicate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsProtocol]: string;\n\n    /**\n     * The related address of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsRelatedAddress]: string;\n\n    /**\n     * The related port of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsRelatedPort]: number;\n\n    /**\n     * The TCP type of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsTcpType]: string;\n\n    /**\n     * The transport ID of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsTransportId]: string;\n\n    /**\n     * The URL of the ICE candidate.\n     */\n    [Constants.PreflightRTCIceCandidateStatsUrl]: string;\n  }\n\n  /**\n   * The `PreflightTest.RTCIceCandidateStats` of the selected remote and local\n   * ICE candidates.\n   */\n  export interface RTCSelectedIceCandidatePairStats {\n    /**\n     * The stats of the local candidate.\n     */\n    [Constants.PreflightRTCSelectedIceCandidatePairStatsLocalCandidate]: RTCIceCandidateStats;\n\n    /**\n     * The stats of the remote candidate.\n     */\n    [Constants.PreflightRTCSelectedIceCandidatePairStatsRemoteCandidate]: RTCIceCandidateStats;\n  }\n\n  /**\n   * A sample generated during the progress of a `PreflightTest`.\n   */\n  export interface RTCSample {\n    /**\n     * The audio input level at the time when the sample was taken.\n     */\n    [Constants.PreflightRTCSampleAudioInputLevel]: number;\n\n    /**\n     * The audio output level at the time when the sample was taken.\n     */\n    [Constants.PreflightRTCSampleAudioOutputLevel]: number;\n\n    /**\n     * The bytes sent at the time when the sample was taken.\n     */\n    [Constants.PreflightRTCSampleBytesReceived]: number;\n\n    /**\n     * The bytes received at the time when the sample was taken.\n     */\n    [Constants.PreflightRTCSampleBytesSent]: number;\n\n    /**\n     * The codec used by the underlying media connection.\n     */\n    [Constants.PreflightRTCSampleCodec]: string;\n\n    /**\n     * The jitter present in the underlying media connection at the time when\n     * the sample was taken.\n     */\n    [Constants.PreflightRTCSampleJitter]: number;\n\n    /**\n     * The evaluated MOS score of the underlying media connection at the time\n     * when the sample was taken.\n     */\n    [Constants.PreflightRTCSampleMos]: number;\n\n    /**\n     * The number of packets lost during the `PreflightTest`.\n     */\n    [Constants.PreflightRTCSamplePacketsLost]: number;\n\n    /**\n     * The fraction of total packets lost during the `PreflightTest`.\n     */\n    [Constants.PreflightRTCSamplePacketsLostFraction]: number;\n\n    /**\n     * The number of packets received during the `PreflightTest`.\n     */\n    [Constants.PreflightRTCSamplePacketsReceived]: number;\n\n    /**\n     * The number of packets sent during the `PreflightTest`.\n     */\n    [Constants.PreflightRTCSamplePacketsSent]: number;\n\n    /**\n     * The round-trip time of a network packet at the time when the sample was\n     * taken.\n     */\n    [Constants.PreflightRTCSampleRtt]: number;\n\n    /**\n     * The timestamp of when the RTC sample was taken during the\n     * `PreflightTest`.\n     */\n    [Constants.PreflightRTCSampleTimestamp]: number;\n  }\n\n  /**\n   * The call quality.\n   */\n  export enum CallQuality {\n    /**\n     * Indicates `4.2 < average MOS`.\n     */\n    Excellent = Constants.PreflightCallQualityExcellent,\n\n    /**\n     * Indicates `4.1 <= average MOS <= 4.2`.\n     */\n    Great = Constants.PreflightCallQualityGreat,\n\n    /**\n     * Indicates `3.7 <= average MOS < 4.1`.\n     */\n    Good = Constants.PreflightCallQualityGood,\n\n    /**\n     * Indicates `3.1 <= average MOS < 3.7`.\n     */\n    Fair = Constants.PreflightCallQualityFair,\n\n    /**\n     * Indicates `average MOS < 3.1`.\n     */\n    Degraded = Constants.PreflightCallQualityDegraded,\n  }\n\n  /**\n   * The final report generated by the `PreflightTest` upon completion. Contains\n   * info related to the call quality and RTC statistics generated during the\n   * `PreflightTest`.\n   */\n  export interface Report {\n    /**\n     * The `CallSid` of the underlying Twilio call used by the `PreflightTest`.\n     */\n    [Constants.PreflightReportCallSid]: string;\n\n    /**\n     * The rated average MOS score of the `PreflightTest`. This value can help\n     * indicate the expected quality of future calls.\n     */\n    [Constants.PreflightReportCallQuality]: CallQuality | null;\n\n    /**\n     * The Twilio Edge used by the `Call` in the `PreflightTest`.\n     */\n    [Constants.PreflightReportEdge]: string;\n\n    /**\n     * An array of ICE candidates gathered when connecting to media.\n     */\n    [Constants.PreflightReportIceCandidateStats]: RTCIceCandidateStats[];\n\n    /**\n     * Whether TURN is required to connect to media.\n     *\n     * This is dependent on the selected ICE candidates, and will be `true` if\n     * either is of type \"relay\", `false` if both are of another type, or\n     * `null` if there are no selected ICE candidates.\n     *\n     * See `PreflightTest.Options.iceServers` for more details.\n     */\n    [Constants.PreflightReportIsTurnRequired]: boolean | null;\n\n    /**\n     * The RTC related stats captured during the `PreflightTest`.\n     */\n    [Constants.PreflightReportStats]: RTCStats;\n\n    /**\n     * Network related time measurements.\n     */\n    [Constants.PreflightReportNetworkTiming]: NetworkTiming;\n\n    /**\n     * Time measurements of the `PreflightTest` in its entirety.\n     */\n    [Constants.PreflightReportTestTiming]: TimeMeasurement;\n\n    /**\n     * RTC samples collected during the `PreflightTest`.\n     */\n    [Constants.PreflightReportSamples]: RTCSample[];\n\n    /**\n     * The Twilio Edge value passed when constructing the `PreflightTest`.\n     */\n    [Constants.PreflightReportSelectedEdge]: string;\n\n    /**\n     * RTC stats for the ICE candidate pair used to connect to media, if ICE\n     * candidates were selected.\n     */\n    [Constants.PreflightReportSelectedIceCandidatePairStats]: RTCSelectedIceCandidatePairStats;\n\n    /**\n     * Array of warnings detected during the `PreflightTest`.\n     */\n    [Constants.PreflightReportWarnings]: Warning[];\n\n    /**\n     * Array of warnings cleared during the `PreflightTest.`\n     */\n    [Constants.PreflightReportWarningsCleared]: WarningCleared[];\n  }\n}\n\n/**\n * Map of call quality values from the native layer to the expected JS values.\n */\nconst callQualityMap = {\n  ios: new Map<number, PreflightTest.CallQuality>([\n    [0, PreflightTest.CallQuality.Excellent],\n    [1, PreflightTest.CallQuality.Great],\n    [2, PreflightTest.CallQuality.Good],\n    [3, PreflightTest.CallQuality.Fair],\n    [4, PreflightTest.CallQuality.Degraded],\n  ]),\n  android: new Map<string, PreflightTest.CallQuality>([\n    ['Excellent', PreflightTest.CallQuality.Excellent],\n    ['Great', PreflightTest.CallQuality.Great],\n    ['Good', PreflightTest.CallQuality.Good],\n    ['Fair', PreflightTest.CallQuality.Fair],\n    ['Degraded', PreflightTest.CallQuality.Degraded],\n  ]),\n};\n\n/**\n * Map of isTurnRequired values from the native layer to the expected JS values.\n */\nconst isTurnRequiredMap = {\n  ios: new Map<string, boolean>([\n    ['true', true],\n    ['false', false],\n  ]),\n};\n\n/**\n * Map of state values from the native layers/common constants to the expected\n * JS values.\n */\nconst preflightTestStateMap = new Map<string, PreflightTest.State>([\n  [Constants.PreflightTestStateCompleted, PreflightTest.State.Completed],\n  [Constants.PreflightTestStateConnected, PreflightTest.State.Connected],\n  [Constants.PreflightTestStateConnecting, PreflightTest.State.Connecting],\n  [Constants.PreflightTestStateFailed, PreflightTest.State.Failed],\n]);\n"],"mappings":"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","ignoreList":[]}